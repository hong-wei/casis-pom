--DOC_STRUC_LINK add and undo process
--
----add columns
---- add ID
--ALTER TABLE casis_mgr.DOC_STRUC_LINK ADD(ID NUMBER (18,0)); 
--CREATE SEQUENCE "DOC_STRUC_LINK_SEQU"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 100 NOORDER NOCYCLE ;
--UPDATE CASIS_MGR.DOC_STRUC_LINK SET ID=DOC_STRUC_LINK_SEQU.NEXTVAL;
--ALTER TABLE CASIS_MGR.DOC_STRUC_LINK ADD CONSTRAINT PK_DOC_STRUC_LINK PRIMARY KEY (ID);
---- add version
--ALTER TABLE CASIS_MGR.DOC_STRUC_LINK ADD(VERSION NUMBER (9,0));
--UPDATE CASIS_MGR.DOC_STRUC_LINK SET VERSION=1;
---- add time_stamp
--ALTER TABLE CASIS_MGR.DOC_STRUC_LINK ADD(UPDATE_TIMESTAMP TIMESTAMP(3));
--UPDATE CASIS_MGR.DOC_STRUC_LINK SET UPDATE_TIMESTAMP=SYSDATE; 


------add trigger:
--create or replace 
--TRIGGER DOC_STRUC_LINK
--BEFORE INSERT OR UPDATE OR DELETE 
--ON DOC_STRUC_LINK
--REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW
--BEGIN
--    IF INSERTING then
--        SELECT DOC_STRUC_LINK_SEQU.NEXTVAL INTO :NEW.ID FROM DUAL;
--        :NEW.Version := 1;
--        :NEW.UPDATE_TIMESTAMP := SYSTIMESTAMP; 
--    ELSIF UPDATING then
--        :NEW.Version := :OLD.Version +1;
--    ELSE
--        NULL;
--    END IF;
--    EXCEPTION
--      WHEN OTHERS THEN
--        NULL;
--END; 

----test Insert 
--INSERT INTO DOC_STRUC_LINK (DOCNO,SRC_DB,CASNO,MDNUMBER) VALUES ('1111111','DGL',NULL,'MD000001    ');
---- test update
--UPDATE DOC_STRUC_LINK SET ID = ID +1 WHERE DOCNO='1111111';
----Display
--SELECT * FROM DOC_STRUC_LINK WHERE DOCNO='1111111';
----count
--SELECT COUNT(*) FROM DOC_STRUC_LINK;
----delete the row
--DELETE FROM DOC_STRUC_LINK WHERE DOCNO='1111111';

