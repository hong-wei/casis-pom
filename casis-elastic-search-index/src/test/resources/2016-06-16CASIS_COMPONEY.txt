--CASIS_COMPANY add and undo process

--add columns
-- add ID
--ALTER TABLE casis_mgr.CASIS_COMPANY ADD(ID NUMBER (18,0)); -- not default value
--CREATE SEQUENCE "CASIS_COMPANY_SEQU"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 100 NOORDER NOCYCLE ;
--UPDATE CASIS_MGR.CASIS_COMPANY SET ID=CASIS_COMPANY_SEQU.NEXTVAL;
--ALTER TABLE CASIS_MGR.CASIS_COMPANY ADD CONSTRAINT PK_COMPANY PRIMARY KEY (ID);
---- add version
--ALTER TABLE CASIS_MGR.CASIS_COMPANY ADD(VERSION NUMBER (9,0));
--UPDATE CASIS_MGR.CASIS_COMPANY SET VERSION=1;
---- add time_stamp
--ALTER TABLE CASIS_MGR.CASIS_COMPANY ADD(UPDATE_TIMESTAMP TIMESTAMP(3));
--UPDATE CASIS_MGR.CASIS_COMPANY SET UPDATE_TIMESTAMP=SYSDATE; 


--add trigger:
--create or replace 
--TRIGGER CASIS_COMPANY
--BEFORE INSERT OR UPDATE OR DELETE 
--ON CASIS_COMPANY
--REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW
--BEGIN
--    IF INSERTING then
--        SELECT CASIS_COMPANY_SEQU.NEXTVAL INTO :NEW.ID FROM DUAL;
--        :NEW.Version := 1;
--        :NEW.UPDATE_TIMESTAMP := SYSDATE; 
--    ELSIF UPDATING then
--        :NEW.Version := :OLD.Version +1;
--    ELSE
--        NULL;
--    END IF;
--    EXCEPTION
--      WHEN OTHERS THEN
--        NULL;
--END; 

----test Insert 
--INSERT INTO CASIS_COMPANY (DOCNO,SRC_DB,CO,COUNTRY,STATUS) VALUES ('1111111','PHPROJ','Novo Nordisk','DK','Licensee');
---- test update
--UPDATE CASIS_COMPANY SET ID = ID +1 WHERE DOCNO='1111111';
----Display
--SELECT * FROM CASIS_COMPANY WHERE DOCNO='1111111';
----count
--SELECT COUNT(*) FROM CASIS_COMPANY;
----delete the row
--DELETE FROM CASIS_COMPANY WHERE DOCNO='1111111';
